---
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './BaseLayout.astro';
import { Picture } from 'astro:assets';

interface Props {
  post: CollectionEntry<'posts'>;
}

const { post } = Astro.props;

let title = '';
let description = '';
let cover = '';
let coverAlt = '';

if (post && post.data) {
  ({ title, description, cover, coverAlt } = post.data);
}
---
<BaseLayout pageTitle={title} description={description} ogImage={cover}>
  <div class='max-w-2xl mx-auto'>
    {cover && (  
      <Picture
        src={cover}
        alt={coverAlt}
        width={1960}
        height={1102}
        widths={[320, 480, 640, 1280, 1960]}
        sizes="(max-width: 320px) 320px, (max-width: 480px) 480px, (max-width: 640px) 640px, (max-width: 1280px) 1280px, 1960px"
        formats={['avif']}
        fallbackFormat='avif'
        loading='eager'
      />
    )}
  </div>
  <article class='max-w-2xl mx-auto'>
    <slot />
  </article>
</BaseLayout>